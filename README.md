# Unity Marching Cubes Voxel Terrain Editor

![Unity](https://img.shields.io/badge/Unity-2021.3%2B-blueviolet) 

This repository contains a fully-featured 3D voxel terrain editor built in Unity. The project was developed as a graded assignment for the **Computer Graphics 2 (Računarska grafika 2)** course at the **University of Belgrade, Faculty of Electrical Engineering**.

The core of the project is an implementation of the **Marching Cubes** algorithm, which allows for the creation of complex, volumetric terrain with concave features like caves, tunnels, arches, and overhangs—structures not possible with traditional heightmap-based terrains.

## Core Features

This tool provides a complete solution for real-time terrain sculpting and visualization, based on the requirements of the academic assignment.

*   **Dynamic Terrain Sculpting**: Interactively add and remove terrain material in real-time.
    *   **Left Mouse Button**: Adds material, pulling the terrain towards the camera's viewpoint.
    *   **Right Mouse Button**: Removes material, carving tunnels and holes away from the camera's viewpoint.
*   **Volumetric Terrain**: Utilizes the Marching Cubes algorithm to generate a mesh from a 3D scalar field, allowing for complete creative freedom.
*   **Adjustable Brush**: A spherical brush with dynamically configurable parameters:
    *   **Radius**: Control the area of effect (`Left Ctrl + Mouse Scroll`).
    *   **Depth/Strength**: Control the depth and intensity of the sculpting action (`Left Alt + Mouse Scroll`).
*   **Full Camera System**: An orbital camera controller for easy navigation.
    *   **Orbit**: Rotate around a central point (`Middle Mouse Button + Drag` or `Arrow Keys`).
    *   **Pan**: Move the camera focus across the horizontal plane (`WASD` keys).
    *   **Zoom**: Zoom in and out smoothly (`Mouse Scroll Wheel`).
*   **Procedural Generation & Utility**:
    *   **Random Terrain**: Generate a noise-based starter terrain at the press of a button (`R` key).
    *   **Flatten Terrain**: Instantly flatten the entire world to a predefined height (`F` key).
*   **Dynamic Voxel Density**: Change the resolution of the underlying voxel grid on-the-fly to manage detail and performance (`PageUp` / `PageDown` keys).
*   **Advanced Shading and Coloring**:
    *   **Custom Phong Shader**: The terrain is lit with a custom shader implementing the Phong lighting model (Ambient + Diffuse components). The directional light's color can be modified in the inspector.
    *   **Height-Based Coloring**: Vertices are colored based on their world-space height using an HSV color model, transitioning from **Red (lowest)** to **Violet (highest)**.
*   **Data Persistence**: The underlying voxel density values are stored in a `Texture3D`, allowing for efficient data handling and potential shader-based manipulations.

## Controls

| Action                      | Control                                |
| --------------------------- | -------------------------------------- |
| **Terrain Sculpting**       |                                        |
| Add Material (towards camera) | `Left Mouse Button`                    |
| Remove Material (away from camera) | `Right Mouse Button`                   |
| Boost Brush Depth           | `Left Shift` + Mouse Button            |
| **Brush Adjustment**        |                                        |
| Adjust Brush Radius         | `Left Ctrl` + `Mouse Scroll`           |
| Adjust Brush Depth/Strength | `Left Alt` + `Mouse Scroll`            |
| **Camera**                  |                                        |
| Pan Camera                  | `W`, `A`, `S`, `D`                     |
| Orbit Camera                | `Middle Mouse Button` + Drag / `Arrow Keys` |
| Zoom Camera                 | `Mouse Scroll Wheel`                   |
| **Terrain Utilities**       |                                        |
| Generate Random Terrain     | `R` key                                |
| Flatten Terrain             | `F` key                                |
| Increase Voxel Resolution   | `Page Up` key                          |
| Decrease Voxel Resolution   | `Page Down` key                        |

## Technical Implementation

*   **Core Algorithm**: The mesh is generated by "polygonising a scalar field" using the Marching Cubes algorithm. The scalar field is stored in a 3D array (`float[,,] density`).
*   **Data Representation**: The density field is also mirrored to a `Texture3D`. This is a common technique for passing volumetric data to the GPU for potential shader effects.
*   **Rendering**: A custom shader (`Custom/TerrainPhong`) calculates lighting. Vertex colors are calculated on the CPU based on height and passed to the mesh, which the shader then uses.

## How to Run

1.  Clone this repository: `git clone https://github.com/VanjaMilutinovic/RG2-Marching-cubes.git`
2.  Open the project folder in a compatible version of the Unity Editor (e.g., Unity 2021.3 LTS or newer).
3.  Open the main scene located in the `Assets/Scenes` folder.
4.  Press the **Play** button.

## Screenshots
Creating a bridge over a "river boat"

<img width="615" height="280" alt="image" src="https://github.com/user-attachments/assets/9ecc975c-f3a2-48c7-82bb-136b383c2b77" />

<img width="286" height="96" alt="image" src="https://github.com/user-attachments/assets/dc2cae55-f099-48c6-85a0-eaa5a406c946" />


